apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: "es-webhook"
webhooks:
  - name: "elastic.lc.com"
    namespaceSelector:
      matchExpressions:
        - key: es
          operator: In
          values: [ "true" ]
    clientConfig:
      url: "https://172.20.72.43:5678/webhook"
      caBundle: "Ci0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlFb1RDQ0Fva0NBUUV3RFFZSktvWklodmNOQVFFTEJRQXdIREVhTUJnR0ExVUVBd3dSVFhrZ1EyVnlkQ0JCCmRYUm9iM0pwZEhrd0hoY05NakF3T1RFeE1UVTBOakV4V2hjTk16QXdPVEE1TVRVME5qRXhXakFSTVE4d0RRWUQKVlFRRERBWnNZeTVqYjIwd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUURBaEI3OQpjLyszemRjaGpjaEcwQ0ZHdjNYQldvK1JXM2tXVXdWRVV3cmVCR25jbGFhMWc4MFNOQkJ5dEhGeHQ5M05pelNnCjlWUFNWSXNQcmYyNDFKZ3N6MmZUTlBtaSt6M2xuQUNydUVjaTF4dUxuZGxqUjkwWG1QK3JPM3J0aVpjSnVuQjgKbkZSTzYwVkNaRWVLVjZkOXJLM0hqNXpQa1NPTy9aaTFZcjZVTmhUWlhlOExkNStuRHdUSDFKQUJ6ejc5VzluNgpLWFVJL0psTGRPVndaT3hTV2xRZ2pPZTdia3QrZG5kak4zSWUzcE9LSjNyWDJ3TGNYSEVjUjdtQlA1QkptOWVnCnJ5SFRVMWJTNEY3L0ZsOVlEbFY0SGg2bTcySkR5L2RNNktibzhQQlgyb2FSL0pDa1p4U3EyMDNEc01pRlUwcWcKd3lXdzZMdjBTZzNCYkJNL0w4c3VDQkZ4Y3R6ZjMrS1NFVndTYVJVelFUSDBlbUtzVGpRZ3JqRlUwV2hNYlZRTQp5cDBOYWY3aUVtWDdiNHlWaWFVcVJ1U1pzVDV2WHdRTGRDRUdZUUI0ZHVXd2w5RzdXT2Iya2JGTnJzeGViQnl6ClNRYWRXUU1tY3IyY29VeHdoNit4S3NVZUVuZUtQMnUrdEl2RWhQcFhabldUTkpMSWhIRWRJU1g2THQwYWN3MXoKN21jaHo1QldGWDl2enZQSFBsU2NFY0p4b3BKOVpKQVJVbDE2U3dEclJtQzA4bWloSzRZZkw1Y2pyVUtTaDc3VQpod0duMmRYcG1MWGNzVjNWdjkwMTJKV21UVlNtN3NtTHJ3cWxQazJpYk9VMTlmbW9YM1h4QlRuU0VEUmdLMTR5CjRMa0hoYnV2b1k3VjRwd1VJeWxDMXpOMWZBai9ONXZpaGhHcHFRSURBUUFCTUEwR0NTcUdTSWIzRFFFQkN3VUEKQTRJQ0FRQkxrajkrLzQ1QldlMDI4cEY3YVBWYTRPNmtwZXBRN2VrMGlSQ1R3TXRTeHlFRXBMU1dBL0R3dDFoegowYmZ0UGFYV1VjZlhBWTBaSHRJd3dYd2R3QnJvd3NpR1VmMk16aThFNjE4R0MzdDFRK2FuQ3VxSjJWZnF0dHNrCmlob0ZFSnVQeE5ZZ1JRUzZXNWdoYTJBNDVWYm8rZzg1djlJaCt6c3lhZG5ySVBBMEFGNExoYXZhZEFZemx2dXgKbEREa2xucWw3N0d6R3JFaXAzMW45R05wWFVRY042Y0prQ3lZeDlQWmtQZklqT3FIdmY5RUEycmNweHdzMHNTTQpqd1QxcFVnTU5kM0JDSjNETE0xcmxhZk5FNUYxNGJibHFCNlVmUTM2MUVNbkhTSXRlTTB3Wi9vN1ozZnQrTW0xCkpqMzFnQ2hRNWF6L1dyTEV2NHAzRnBUbURvZ3BERElMSmM2eldkM2JYbzJFeTY2ZW9pZytidG9GUnpSMUlzSHQKVjRYL0NzLzAxVEFYeUtqclVDd0pkdVNKYklHd0ppZC8wRXBmUWdVTnVhRXA4SUV3OHNBMDBWdHNVMEdWdmErcgp2eXp1MVpPN01sTVZuWUhQcVVsWTBsK1hyNzZUWk5QMWFOT0x2bGg2MTZpRGtMaEUwaUF3bW14a3hHYkVuQTBmCm8wWTJzU3lDQkY4WUo1SHRVdUp5Y2MvTUZkTzlBRWlEOTQ3WUpHanhLdnVEeHFSZGw5cHNCNFZhWmpzemw3T3IKOXZST1NUZHZQT2c0dDd5WUdsSU9nMGhtWG9Ib0hPekgrdzkvbERQZ0sraGxMN2toMFdrK2tsOXQrKzg5T3lTRAp5ZTlTOWFrbEtKL1M4MmNHTndGSjFUb3pLTkFnSjZjZExVemVsc25FWlBCYVcrNjhCZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg=="
    rules:
      - apiGroups:   ["apps"]
        apiVersions: ["v1"]
        operations: ["CREATE"]
        resources:   ["statefulsets"]
        scope:       "Namespaced"
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: None
    timeoutSeconds: 5